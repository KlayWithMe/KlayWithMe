(this["webpackJsonpklay-market"]=this["webpackJsonpklay-market"]||[]).push([[0],{106:function(e,t,n){e.exports={container:"NotFound_container__1NU_K",inner:"NotFound_inner__2px-5",title:"NotFound_title__2DPJN",description:"NotFound_description__nuDh7",homeButton:"NotFound_homeButton__1Ano4"}},107:function(e,t,n){e.exports={container:"NftButton_container__3OcNk",modalButton:"NftButton_modalButton__q036V"}},170:function(e,t,n){e.exports={container:"Feed_container__n9K8q",title:"Feed_title__22gvL",postContainer:"Feed_postContainer__25p3k"}},171:function(e,t,n){e.exports={container:"Footer_container__12VmU",inner:"Footer_inner__2Tc22",informationContainer:"Footer_informationContainer__2Rg3V",information:"Footer_information__3DrVM",logo:"Footer_logo__1W0Kt",description:"Footer_description__zKsYo",linkContainer:"Footer_linkContainer__12Iu0",linkItem:"Footer_linkItem__2XuZJ",copyrightContainer:"Footer_copyrightContainer__13XlL",copyright:"Footer_copyright__sR80m"}},243:function(e,t,n){e.exports={container:"Feed_container__25dZW",title:"Feed_title__2x85c",postContainer:"Feed_postContainer__3V6kL"}},245:function(e,t,n){e.exports={container:"ModalButton_container__1w5EU",modalButton:"ModalButton_modalButton__3iAGR"}},246:function(e,t,n){e.exports={container:"LoginButton_container__23wq_",modalButton:"LoginButton_modalButton__3EJhL"}},247:function(e,t,n){e.exports={container:"UserButton_container__jHWgm",modalButton:"UserButton_modalButton__2NvGp"}},408:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"tokenOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"},{"name":"tokenURI","type":"string"}],"name":"mintWithTokenURI","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"id","type":"uint256"},{"name":"uri","type":"string"}],"name":"setTokenUri","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"tokenURIs","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"owner","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"ownedTokens","outputs":[{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},415:function(e,t,n){e.exports={title:"Logo_title__2wnn7"}},443:function(e,t,n){var a={"./caver-abi/src/index.js":129,"./caver-account/src/index.js":78,"./caver-contract/src/index.js":91,"./caver-core-helpers/src/index.js":41,"./caver-core-method/src/index.js":69,"./caver-core-requestmanager/caver-providers-http/src/index.js":320,"./caver-core-requestmanager/caver-providers-ipc/src/index.js":324,"./caver-core-requestmanager/caver-providers-ws/src/index.js":319,"./caver-core-requestmanager/src/index.js":317,"./caver-core-subscriptions/src/index.js":120,"./caver-core/src/index.js":53,"./caver-ipfs/src/index.js":328,"./caver-kct/src/index.js":392,"./caver-klay/caver-klay-accounts/src/index.js":395,"./caver-klay/caver-klay-personal/src/index.js":398,"./caver-klay/src/index.js":399,"./caver-middleware/src/index.js":198,"./caver-net/src/index.js":240,"./caver-rpc/src/index.js":400,"./caver-rtm/src/index.js":126,"./caver-transaction/src/index.js":401,"./caver-utils/iban/src/index.js":312,"./caver-utils/promievent/src/index.js":311,"./caver-utils/src/index.js":10,"./caver-validator/src/index.js":402,"./caver-wallet/src/index.js":220};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=443},444:function(e,t){},452:function(e,t){},454:function(e,t){},464:function(e,t){},466:function(e,t){},491:function(e,t){},497:function(e,t){},499:function(e,t){},517:function(e,t){},58:function(e,t,n){e.exports={container:"PostDetail_container__16PIm",imageContainer:"PostDetail_imageContainer__18OEg",imageContent:"PostDetail_imageContent__3EcNM",textContainer:"PostDetail_textContainer__rU4hW",basicContainer:"PostDetail_basicContainer__3JITZ",contentTitle:"PostDetail_contentTitle__11O9i",contentAddress:"PostDetail_contentAddress__1FQCF",contentDate:"PostDetail_contentDate__2V9l2",uniqueContainer:"PostDetail_uniqueContainer__2sBKO",contentContainer:"PostDetail_contentContainer__2T8YG",descriptContainer:"PostDetail_descriptContainer__2A43u",ownerName:"PostDetail_ownerName__2IkYv",ownerAddress:"PostDetail_ownerAddress__1IA2-"}},62:function(e,t,n){e.exports={container:"UserDetail_container__2Xui8",imageContainer:"UserDetail_imageContainer__3J834",coverImageContent:"UserDetail_coverImageContent__3QtKK",profileContainer:"UserDetail_profileContainer__39V-3",profileImageContent:"UserDetail_profileImageContent__HdRRe",textContainer:"UserDetail_textContainer__nViJf",textItems:"UserDetail_textItems__27vaM",textBox:"UserDetail_textBox__3aiOV",userName:"UserDetail_userName__23a7w",userAddress:"UserDetail_userAddress__18Ve-",socialContainer:"UserDetail_socialContainer__KmY1U",description:"UserDetail_description__1ckKA"}},620:function(e,t){},626:function(e,t){},63:function(e,t,n){e.exports={container:"Upload_container__3RiRz",imageContainer:"Upload_imageContainer__30FpR",imageContent:"Upload_imageContent__2j7lU",textContainer:"Upload_textContainer__26rtr",basicContainer:"Upload_basicContainer__2ztYe",contentTitleText:"Upload_contentTitleText__1xwGl",contentTitle:"Upload_contentTitle__RRsGP",contentAddress:"Upload_contentAddress__WxQgy",contentDate:"Upload_contentDate__2eRGi",uniqueContainer:"Upload_uniqueContainer__2evzn",contentContainer:"Upload_contentContainer__kn8as",contentContainerSub:"Upload_contentContainerSub__2qXLX",descriptContainer:"Upload_descriptContainer__2JVPz",ownerName:"Upload_ownerName__23qRF",ownerAddress:"Upload_ownerAddress__3Bcef",modalButton:"Upload_modalButton__1WgyR"}},638:function(e,t){},639:function(e,t){},66:function(e,t,n){e.exports={container:"Post_container__1lqsd",imageContainer:"Post_imageContainer__3QdrN",textContainer:"Post_textContainer__2dIgJ",titleContainer:"Post_titleContainer__3-gu5",title:"Post_title__3MufW",number:"Post_number__3bu3j",contentContainer:"Post_contentContainer__2tRNs",content:"Post_content__jC0uT",date:"Post_date__3r4II"}},80:function(e,t,n){e.exports={container:"Header_container__29Cyd",inner:"Header_inner__mU6tS",logoContainer:"Header_logoContainer__thx6v",navContainer:"Header_navContainer__3uslj",navItem:"Header_navItem__1oxwc",walletContainer:"Header_walletContainer__chRZT",connected:"Header_connected__37mpH"}},894:function(e){e.exports=JSON.parse("{}")},895:function(e){e.exports=JSON.parse("{}")},896:function(e,t,n){},900:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(406),c=n.n(s),o=n(15),i=n(38),l=n(20),u=n(416),d=n(66),j=n.n(d),p=n(47),b=n(30),f=n.n(b),m=n(1);function x(e){var t=e.index,n=e.post,r=String(t).padStart(4,"0"),s=n.content.slice(0,60),c=Object(a.useState)({}),d=Object(l.a)(c,2),b=d[0],x=d[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/users/"+n.userId).catch((function(e){}));case 2:(t=e.sent)&&t.data&&x(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n.userId]),Object(m.jsx)("section",{className:j.a.container,children:Object(m.jsxs)(p.b,{to:"/posts/".concat(n._id),children:[null!==n&&void 0!==n&&n.image?Object(m.jsx)("img",{src:null===n||void 0===n?void 0:n.image,alt:"content",className:j.a.imageContainer}):null,Object(m.jsxs)("div",{className:j.a.textContainer,children:[Object(m.jsxs)("div",{className:j.a.titleContainer,children:[Object(m.jsx)("span",{className:j.a.title,children:n.title}),Object(m.jsxs)("span",{className:j.a.number,children:["#",r]})]}),Object(m.jsxs)("div",{className:j.a.contentContainer,children:[Object(m.jsxs)("div",{className:j.a.content,children:[s,"..."]}),Object(m.jsx)("span",{className:j.a.date,children:null!==b&&void 0!==b&&b.username?"by "+b.username:"by undefined"}),Object(m.jsx)("span",{className:j.a.date,children:Object(u.a)(n.createdAt)})]})]})]})})}var _=n(243),O=n.n(_),h={user:void 0,setUser:function(){},myAddress:void 0,setMyAddress:function(){},networkVersion:void 0,myBlance:void 0,setMyBalance:function(){},DEFAULT_ADDRESS:""},v=Object(a.createContext)(h),y=function(e){var t=e.children,n="0x0000000000000000",r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],o=s[1],i=Object(a.useState)(n),u=Object(l.a)(i,2),d=u[0],j=u[1],p=Object(a.useState)(0),b=Object(l.a)(p,2),f=b[0],x=b[1];return Object(m.jsx)(v.Provider,{value:{user:c,setUser:o,myAddress:d,setMyAddress:j,myBalance:f,setMyBalance:x,DEFAULT_ADDRESS:n},children:t})};function k(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/posts/timeline/all").catch((function(e){e&&e.respone&&alert(e.response.data)}));case 2:t=e.sent,r(t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var s=0;return Object(m.jsx)("section",{className:O.a.container,children:Object(m.jsx)("div",{className:O.a.postContainer,children:n.map((function(e){return Object(m.jsx)(x,{index:s++,post:e},e._id)}))})})}function C(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("div",{className:"feedContainer",children:Object(m.jsx)(k,{})})})}var N=n(244),g=n.n(N),w=(n(894),n(408)),B=(n(895),"0x0181A30610574b14f21470BDfAdAb9d2d5ECC80B"),I={headers:[{name:"Authorization",value:"Basic S0FTS1VFWTBXWTUzSUowUEszUjUyRDZSOkNkVW5GQ2RhWUxqXzVsdVJGWXd3aGQyWTRhdUt4ZUlKWE9HOEN1aEo="},{name:"x-chain-id",value:"8217"}]},U=new g.a(new g.a.providers.HttpProvider("https://node-api.klaytnapi.com/v1/klaytn",I)),A=(new U.contract(w,B),function(e){return U.rpc.klay.getBalance(e).then((function(e){var t=U.utils.convertFromPeb(U.utils.hexToNumberString(e));return console.log("BALANCE: ".concat(t)),t}))}),M=n(62),F=n.n(M);function D(e){var t=e.user,n=Object(a.useContext)(v),r=n.user,s=n.myBalance;return Object(m.jsx)("section",{className:F.a.container,children:Object(m.jsxs)("div",{className:F.a.profileContainer,children:[null!==t&&void 0!==t&&t.profilePicture?Object(m.jsx)("img",{src:t.profilePicture,alt:"profile",width:"200",height:"200",className:F.a.profileImageContent}):null,Object(m.jsxs)("div",{className:F.a.textContainer,children:[Object(m.jsxs)("div",{className:F.a.textItems,children:[Object(m.jsxs)("div",{className:F.a.textBox,children:[Object(m.jsx)("span",{className:F.a.userName,children:t.username}),Object(m.jsx)("span",{className:F.a.userAddress,children:t.walletAddress}),Object(m.jsx)("span",{className:F.a.userAddress,children:t===r?s:null})]}),t!==r?Object(m.jsxs)("div",{className:F.a.socialContainer,children:[Object(m.jsx)("button",{children:"Follow"}),Object(m.jsx)("button",{children:"Following"})]}):null]}),Object(m.jsx)("div",{className:F.a.description,children:t.desc})]})]})})}var T=n(95),R=n.n(T);function P(){var e=Object(a.useContext)(v),t=(e.user,e.myAddress),n=(e.setMyBalance,0),r=Object(a.useState)([]),s=Object(l.a)(r,2),c=s[0],u=s[1],d=Object(a.useState)([]),j=Object(l.a)(d,2),p=j[0],b=j[1],_=Object(a.useContext)(v).user,O=Object(a.useState)("My Posts"),h=Object(l.a)(O,2),y=h[0],k=h[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/posts/user/"+_._id);case 2:(t=e.sent)&&t.data&&u(t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var n,a,r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return alert("fetch nfts error: no user"),e.abrupt("return");case 3:return e.next=5,f.a.put("/klaytn/info/"+t);case 5:n=e.sent,a=[],r=0;case 8:if(!(r<n.data.length)){e.next=20;break}return e.next=11,f.a.get(n.data[r].uri);case 11:if(null!=(s=e.sent).data){e.next=16;break}return e.abrupt("continue",17);case 16:a.push(s.data);case 17:r++,e.next=8;break;case 20:b(a);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),n()}),[]),_?Object(m.jsxs)("div",{className:R.a.container,children:[Object(m.jsx)("div",{className:"userProfile",children:Object(m.jsx)(D,{user:_})}),Object(m.jsxs)("div",{className:R.a.tabContainer,children:[Object(m.jsx)("button",{className:R.a.tabButton,onClick:function(){k("My Posts")},children:" My Posts "}),Object(m.jsx)("button",{className:R.a.tabButton,onClick:function(){k("My NFTs")},children:" My NFTs "})]}),"My Posts"===y?Object(m.jsx)("div",{className:R.a.postContainer,children:c.map((function(e){if(!1===e.isNFT)return Object(m.jsx)(x,{index:n++,post:e},e._id)}))}):null,"My NFTs"===y?Object(m.jsx)("div",{className:R.a.postContainer,children:p.map((function(e){return Object(m.jsx)(x,{index:n++,post:e},e._id)}))}):null]}):Object(m.jsx)("div",{children:alert("NO USER")})}var S=n(106),q=n.n(S);function E(){return Object(m.jsxs)("div",{className:q.a.container,children:[Object(m.jsxs)("div",{className:q.a.inner,children:[Object(m.jsx)("div",{className:q.a.title,children:"Page"}),Object(m.jsxs)("div",{className:q.a.description,children:[Object(m.jsx)("span",{children:"Not"})," Found"]})]}),Object(m.jsx)(p.b,{className:q.a.homeButton,to:"/",children:"Home"})]})}var L=n(170),K=n.n(L);function W(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n,a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/klaytn/info/all").catch((function(e){e&&e.respone&&alert(e.response.data)}));case 2:t=e.sent,console.log(t.data),n=[],a=0;case 6:if(!(a<t.data.length)){e.next=18;break}return e.next=9,f.a.get(t.data[a].uri);case 9:if(null!=(s=e.sent).data){e.next=14;break}return e.abrupt("continue",15);case 14:n.push(s.data);case 15:a++,e.next=6;break;case 18:r(n);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var s=0;return Object(m.jsxs)("section",{className:K.a.container,children:[Object(m.jsx)("div",{className:K.a.title,children:"Market"}),Object(m.jsx)("div",{className:K.a.postContainer,children:n.map((function(e){return Object(m.jsx)(x,{index:s++,post:e},e._id)}))})]})}function H(){return Object(m.jsx)("div",{children:Object(m.jsx)(W,{})})}n(896);var J="https://a2a-api.klipwallet.com/v2/a2a/prepare",V="KLAY_MARKET",Q=!(window.screen.width>=1200),G=function(e,t){return"QR"===e?"https://klipwallet.com/?target=/a2a?request_key=".concat(t):"kakaotalk://klipwallet/open?url=https://klipwallet.com/?target=/a2a?request_key=".concat(t)},z=function(e,t){f.a.post(J,{bapp:{name:V},type:"auth"}).then((function(n){var a=n.data.request_key;Q?window.location.href=G("android",a):e(G("QR",a));var r=setInterval((function(){f.a.get("https://a2a-api.klipwallet.com/v2/a2a/result?request_key=".concat(a)).then((function(n){n.data.result&&(console.log("[result] ".concat(JSON.stringify(n.data.result))),t(n.data.result.klaytn_address),clearInterval(r),e("DEFAULT"))}))}),1e3)}))},Y={showModal:!1,setShowModal:function(){},qrvalue:void 0,setQrvalue:function(){},modalPrefference:{title:"Modal",buttonName:"button",onConfirm:function(){}},setModalPrefference:function(){},DEFAULT_ADDRESS:"0x0000000000000000",DEFAULT_QR_CODE:"DEFAULT"},X=Object(a.createContext)(Y),Z=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(l.a)(n,2),s=r[0],c=r[1],o="DEFAULT",i=Object(a.useState)(o),u=Object(l.a)(i,2),d=u[0],j=u[1],p=Object(a.useState)({title:"Modal",buttonName:"button",onConfirm:function(){}}),b=Object(l.a)(p,2),f=b[0],x=b[1],_=Object(a.useRef)(""),O=Object(a.useRef)(""),h=Object(a.useRef)("");return Object(m.jsx)(X.Provider,{value:{showModal:s,setShowModal:c,qrvalue:d,setQrvalue:j,modalPrefference:f,setModalPrefference:x,modalInputRefusername:_,modalInputReftokenIdHead:O,modalInputReftokenIdTail:h,DEFAULT_QR_CODE:o},children:t})},$=n(409),ee=n(906),te=n(905),ne=n(907),ae=n(245),re=n.n(ae);function se(e){var t=e.buttonName,n=e.onClickFunction;return t?Object(m.jsx)("div",{className:re.a.container,children:Object(m.jsx)("button",{variant:"primary",className:re.a.modalButton,onClick:function(){n()},children:t})}):null}n(897);function ce(){var e=Object(a.useContext)(X),t=e.showModal,n=e.setShowModal,r=e.modalPrefference,s=e.modalInputRefusername,c=e.modalInputReftokenIdHead,o=e.modalInputReftokenIdTail,i=e.qrvalue;return Object(m.jsx)(ee.a,{show:t,onHide:function(){n(!1)},size:"sm",centered:!0,children:Object(m.jsxs)("div",{style:{backgroundColor:"white",border:"1px solid rgb(255, 154, 145)",color:"white",borderRadius:"5px"},children:[Object(m.jsx)(ee.a.Header,{style:{display:"flex",justifyContent:"center",border:"none",color:"#292929bf"},children:Object(m.jsx)(ee.a.Title,{children:r.title})}),Object(m.jsx)(ee.a.Body,{style:{display:"flex",justifyContent:"center",border:"none"},children:Object(m.jsx)(te.a,{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)("div",{style:{backgroundColor:"white",width:"160",height:"160",padding:5},children:Object(m.jsx)($.a,{value:i,size:150,style:{margin:"auto",backgroundColor:"white"}})})})}),Object(m.jsxs)(ee.a.Footer,{style:{display:"flex",justifyContent:"center",alignItems:"center",border:"none"},children:["Register"===r.title?Object(m.jsx)(ne.a,{children:Object(m.jsxs)(ne.a.Group,{children:[Object(m.jsx)(ne.a.Label,{children:"User name"}),Object(m.jsx)(ne.a.Control,{type:"name",autoFocus:!0,ref:s,style:{border:"none",height:"25px"}}),Object(m.jsx)(ne.a.Label,{children:"Write Accessable TokenId (first)"}),Object(m.jsx)(ne.a.Control,{type:"name",autoFocus:!0,ref:c,style:{border:"none",height:"25px"}}),Object(m.jsx)(ne.a.Label,{children:"Write Accessable TokenId (last)"}),Object(m.jsx)(ne.a.Control,{type:"name",autoFocus:!0,ref:o,style:{border:"none",height:"25px"}})]})}):null,Object(m.jsx)(se,{buttonName:r.kasButton,onClickFunction:r.onClickKas}),Object(m.jsx)(se,{buttonName:r.klipButton,onClickFunction:r.onClickKlip}),Object(m.jsx)(se,{buttonName:r.confirmButton,onClickFunction:r.onConfirm}),Object(m.jsx)(se,{buttonName:"close",onClickFunction:function(){n(!1)}})]})]})})}var oe=n(246),ie=n.n(oe);function le(){var e=Object(a.useContext)(v),t=e.setUser,n=e.setMyBalance,r=e.setMyAddress,s=Object(a.useContext)(X),c=s.setShowModal,l=s.setModalPrefference,u=s.modalInputRefusername,d=s.modalInputReftokenIdHead,j=s.modalInputReftokenIdTail,p=s.setQrvalue,b=function(){var e=Object(i.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/auth/register",{walletAddress:t,username:u.current.value,tokenIdHead:d.current.value,tokenIdTail:j.current.value}).catch((function(e){e.response&&e.response.data&&(alert(t),alert(u.current.value),alert(e.response.data))}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:alert("Welcome! "+n.data.username+". Please try login again"),y();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/auth/login",{walletAddress:t}).catch((function(e){e.response&&404===e.response.status?(alert("You need to register"),h(t)):alert("server error")}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window||!1!==window.klaytn.isKaikas){e.next=4;break}window.open("https://chrome.google.com/webstore/detail/kaikas/jblndlipeogpafnldhgmapagcccfchpi"),e.next=9;break;case 4:if("undefined"===typeof window){e.next=8;break}window.klaytn.enable().then(function(){var e=Object(i.a)(Object(o.a)().mark((function e(a){var s,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=window.klaytn.selectedAddress,e.next=3,x(s);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:return alert("Welcome back "+i.data.username+"!"),r(s),e.next=10,A(s);case 10:l=e.sent,n(l),t(i.data),c(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9;break;case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(p,function(){var e=Object(i.a)(Object(o.a)().mark((function e(a){var s,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(a);case 2:if(s=e.sent){e.next=5;break}return e.abrupt("return");case 5:return alert("Welcome back "+s.data.username+"!"),r(a),e.next=9,A(a);case 9:i=e.sent,n(i),t(s.data),c(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){l({title:"Register",kasButton:"",klipButton:"",confirmButton:"register",onConfirm:function(){b(e)}}),c(!0)},y=function(){l({title:"Login",kasButton:"Login with Kaikas",klipButton:"Login with Klip",onClickKas:function(){_()},onClickKlip:function(){O()}}),c(!0)};return Object(m.jsxs)("div",{className:ie.a.container,children:[Object(m.jsx)("button",{className:ie.a.modalButton,onClick:function(){y()},children:"Login"}),Object(m.jsx)(ce,{})]})}var ue=n(247),de=n.n(ue);function je(){var e=Object(a.useContext)(v).user;return Object(m.jsx)("div",{className:de.a.container,children:Object(m.jsx)(p.b,{to:"/myprofile",children:Object(m.jsx)("button",{className:de.a.modalButton,children:e.username})})})}var pe=n(415),be=n.n(pe);function fe(){return Object(m.jsx)("div",{children:Object(m.jsx)(p.b,{to:"/",children:Object(m.jsx)("span",{className:be.a.title,children:"KlayWithMe"})})})}var me=n(80),xe=n.n(me);var _e=function(){var e=Object(a.useContext)(v).user;return Object(m.jsx)(Z,{children:Object(m.jsx)("header",{className:xe.a.container,children:Object(m.jsxs)("div",{className:xe.a.inner,children:[Object(m.jsx)("div",{className:xe.a.logoContainer,children:Object(m.jsx)(fe,{})}),Object(m.jsxs)("nav",{className:xe.a.navContainer,children:[Object(m.jsx)(p.b,{to:"/market",children:Object(m.jsx)("span",{className:xe.a.navItem,children:"Market"})}),Object(m.jsx)(p.b,{to:"/posting",children:Object(m.jsx)("span",{className:xe.a.navItem,children:"Posting"})}),Object(m.jsx)("span",{className:xe.a.modalButton,children:e?Object(m.jsx)(je,{}):Object(m.jsx)(le,{className:xe.a.modalButton})})]})]})})})},Oe=n(171),he=n.n(Oe);function ve(){return Object(m.jsx)("footer",{className:he.a.container,children:Object(m.jsx)("div",{className:he.a.copyrightContainer,children:Object(m.jsxs)("div",{className:he.a.copyright,children:["Klayklay \u24d2",(new Date).getFullYear()," All Right Resolved."]})})})}var ye=n(22),ke=n(58),Ce=n.n(ke),Ne=n(242),ge=n(107),we=n.n(ge);function Be(e){e.user;var t,n=e.post,r=e.type,s=Object(a.useContext)(v),c=s.user,l=(s.setMyBalance,Object(a.useContext)(X)),u=(l.showModal,l.setShowModal),d=l.setModalPrefference,j=l.setQrvalue,p=l.DEFAULT_ADDRESS,b=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,a,r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.walletAddress!==p){e.next=3;break}return alert("NO ADDRESS"),e.abrupt("return");case 3:if(!0!==n.isNFT){e.next=6;break}return alert("this post is already minted"),e.abrupt("return");case 6:o=parseInt(c.tokenIdHead),i=parseInt(c.tokenIdTail),o=Math.ceil(o),i=Math.floor(i),t=Math.floor(Math.random()*(i-o+1))+o,a={toAddress:c.walletAddress,tokenId:t,uri:"/posts/"+n._id,isMobile:!1},r="/posts/"+n._id,s=null,f.a.put("/klaytn/mintPostURL",a).then((function(e){console.log(a),j(e.data.url+e.data.request_key),s=e.data.request_key;var n=setInterval((function(){f.a.get("https://a2a-api.klipwallet.com/v2/a2a/result?request_key=".concat(s)).then((function(e){e.data.result&&(console.log("[result] ".concat(JSON.stringify(e.data.result))),clearInterval(n),j("DEFAULT"),alert("Mint Successful"),f.a.put(r,{userId:c._id,isNFT:!0,tokenId:t}).catch((function(e){e.response&&alert(e.response.data)})),u(!1))}))}),1e3)}));case 11:case"end":return e.stop()}var o,i}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){d({title:"Mint",kasButton:"",klipButton:"Use Klip",confirmButton:"",onClickKas:function(){},onClickKlip:function(){b()}}),u(!0)},_=function(){d({title:"Sale",kasButton:"",klipButton:"Use Klip",confirmButton:"",onClickKas:function(){},onClickKlip:function(){!function(){var e=null,t={isMobile:!1,fromAddress:c.walletAddress,tokenId:n.tokenId};console.log(t);try{f.a.put("/klaytn/saleTokenURL",t).then((function(t){var a=t.data.url+t.data.request_key;j(a),e=t.data.request_key;var r=setInterval((function(){f.a.get("https://a2a-api.klipwallet.com/v2/a2a/result?request_key=".concat(e)).then((function(e){e.data.result&&(console.log("[result] ".concat(JSON.stringify(e.data.result))),clearInterval(r),alert("Now token is On Market"),f.a.put("/posts/"+n._id,{userId:c._id,isOnSale:!0}).catch((function(e){e.response&&alert(e.response.data)})),u(!1))}))}),1e3)}))}catch(a){console.log(a.response.data)}}()}}),u(!0)},O=function(){d({title:"Buy",kasButton:"",klipButton:"Use Klip",confirmButton:"",onClickKas:function(){},onClickKlip:function(){!function(){var e=null,t={isMobile:!1,tokenId:n.tokenId};console.log(t);try{f.a.put("/klaytn/purchaseTokenURL",t).then((function(t){var a=t.data.url+t.data.request_key;j(a),e=t.data.request_key;var r=setInterval((function(){f.a.get("https://a2a-api.klipwallet.com/v2/a2a/result?request_key=".concat(e)).then((function(e){e.data.result&&(console.log("[result] ".concat(JSON.stringify(e.data.result))),clearInterval(r),alert("You Bought NFT Post. It's all yours now"),f.a.put("/posts/modifiyOwner/"+n._id,{userId:c._id,isOnSale:!1}).catch((function(e){e.response&&alert(e.response.data)})),u(!1))}))}),1e3)}))}catch(a){console.log(a.response.data)}}()}}),u(!0)},h=function(){d({title:"Burn",kasButton:"",klipButton:"Use Klip",confirmButton:"",onClickKas:function(){},onClickKlip:function(){!function(){var e=null,t={isMobile:!1,walletAddress:c.walletAddress,tokenId:n.tokenId};console.log(t);try{f.a.put("/klaytn/burnTokenURL",t).then((function(t){var a=t.data.url+t.data.request_key;j(a),e=t.data.request_key;var r=setInterval((function(){f.a.get("https://a2a-api.klipwallet.com/v2/a2a/result?request_key=".concat(e)).then((function(e){e.data.result&&(console.log("[result] ".concat(JSON.stringify(e.data.result))),clearInterval(r),alert("You burn the NFT Post"),f.a.delete("/posts/"+n._id,{userId:c._id}).catch((function(e){e.response&&alert(e.response.data)})),u(!1))}))}),1e3)}))}catch(a){console.log(a.response.data)}}()}}),u(!0)};return Object(m.jsxs)("div",{className:we.a.container,children:[function(e){"mint"===e?t=Object(m.jsx)("button",{className:we.a.modalButton,onClick:function(){x()},children:"Mint"}):"market"===e?t=Object(m.jsx)("button",{className:we.a.modalButton,onClick:function(){_()},children:"Sale"}):"buy"===e?t=Object(m.jsx)("button",{className:we.a.modalButton,onClick:function(){O()},children:"Buy"}):"burn"===e&&(t=Object(m.jsx)("button",{className:we.a.modalButton,onClick:function(){h()},children:"Burn"}))}(r),t,Object(m.jsx)(ce,{})]})}function Ie(){var e=Object(ye.h)().id,t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),u=Object(l.a)(c,2),d=u[0],j=u[1],p=Object(a.useContext)(v).user;Object(a.useEffect)((function(){var t=function(){var t=Object(i.a)(Object(o.a)().mark((function t(){var a;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/posts/"+e);case 2:(a=t.sent)&&a.data&&s(a.data),n(a.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(i.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/users/"+t.userId).catch((function(e){}));case 2:(n=e.sent)&&n.data&&j(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t()}),[]);var b=null,x=null;return Object(m.jsx)(Z,{children:Object(m.jsxs)("section",{className:Ce.a.container,children:[Object(m.jsx)("div",{className:Ce.a.imageContainer,children:null!==r&&void 0!==r&&r.image?Object(m.jsx)("img",{src:r.image,alt:"content",className:Ce.a.imageContent}):null}),Object(m.jsxs)("div",{className:Ce.a.textContainer,children:[Object(m.jsxs)("div",{className:Ce.a.basicContainer,children:[Object(m.jsx)("span",{className:Ce.a.contentTitle,children:r.title}),Object(m.jsx)("div",{className:Ce.a.contentDate,children:Object(Ne.a)(r.createdAt,"yyyy-mm-dd HH:MM:ss")})]}),Object(m.jsxs)("div",{className:Ce.a.uniqueContainer,children:[Object(m.jsx)("div",{className:Ce.a.contentContainer,children:r.content}),Object(m.jsxs)("div",{className:Ce.a.descriptContainer,children:[Object(m.jsxs)("div",{className:Ce.a.ownerName,children:["owned by ",d?d.username:"undefined"]}),Object(m.jsx)("div",{className:Ce.a.ownerAddress,children:d?d.walletAddress:"undefined"}),Object(m.jsxs)("div",{children:["isNFT? ",r.isNFT?"true":"false"]})]}),Object(m.jsxs)("div",{className:"",children:[function(){if(r.isNFT)if(r.isOnSale)b=Object(m.jsx)(Be,{post:r,user:d,type:"buy"});else{if(d.walletAddress!==p.walletAddress)return null;b=Object(m.jsx)(Be,{post:r,user:d,type:"market"}),x=Object(m.jsx)(Be,{post:r,user:d,type:"burn"})}else{if(d.walletAddress!==p.walletAddress)return null;b=Object(m.jsx)(Be,{post:r,user:d,type:"mint"})}}(),b,x]})]})]})]})})}var Ue=n(63),Ae=n.n(Ue);function Me(){Object(ye.h)().id;var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=(t[1],Object(a.useContext)(v).user),s=Object(a.useRef)(""),c=Object(a.useRef)(""),u=Object(a.useRef)(""),d=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=c.current.value||null!=u.current.value){e.next=3;break}return alert("Upload failed put title and content!"),e.abrupt("return");case 3:return t={userId:r._id,title:c.current.value,content:u.current.value,image:s.current.value},e.next=6,f.a.post("/posts",t).catch((function(e){alert("Upload failed."),e&&e.response&&e.response.status&&alert("status: "+e.response.status)}));case 6:e.sent,alert("Upload success!");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(Z,{children:Object(m.jsxs)("section",{className:Ae.a.container,children:[Object(m.jsx)("div",{className:Ae.a.imageContainer,children:null!==n&&void 0!==n&&n.image?Object(m.jsx)("img",{src:n.image,alt:"content",className:Ae.a.imageContent}):null}),Object(m.jsxs)("div",{className:Ae.a.textContainer,children:[Object(m.jsxs)("div",{className:Ae.a.basicContainer,children:[Object(m.jsx)("div",{className:Ae.a.contentTitleText,children:"Title"}),Object(m.jsx)("input",{className:Ae.a.contentTitle,required:!0,ref:c})]}),Object(m.jsxs)("div",{className:Ae.a.uniqueContainer,children:[Object(m.jsx)("textarea",{className:Ae.a.contentContainer,required:!0,ref:u}),Object(m.jsxs)("div",{className:Ae.a.descriptContainer,children:[Object(m.jsx)("input",{type:"url",style:{width:"200px",border:"solid 1px black",borderRadius:"15px",paddingLeft:"10px"},placeholder:"Please enter image URL",ref:s}),Object(m.jsx)("button",{onClick:function(){d()},className:Ae.a.modalButton,children:"submit"})]}),Object(m.jsx)("div",{className:""})]})]})]})})}function Fe(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Me,{})})}var De=function(){var e=Object(a.useContext)(v).user;return Object(m.jsxs)(p.a,{basename:"process.env.PUBLIC_URL",children:[Object(m.jsxs)("div",{className:"mainWrapper",children:[Object(m.jsx)("div",{className:"mainLeft",children:Object(m.jsx)(_e,{})}),Object(m.jsx)("div",{className:"mainRight",children:Object(m.jsxs)(ye.d,{children:[Object(m.jsx)(ye.b,{path:"/",element:Object(m.jsx)(C,{})}),Object(m.jsx)(ye.b,{path:"/posts/:id",element:Object(m.jsx)(Ie,{})}),Object(m.jsx)(ye.b,{path:"/myprofile",element:e?Object(m.jsx)(P,{}):Object(m.jsx)(ye.a,{to:"/"})}),Object(m.jsx)(ye.b,{path:"/market",element:e?Object(m.jsx)(H,{}):Object(m.jsx)(ye.a,{to:"/"})}),Object(m.jsx)(ye.b,{path:"/posting",element:e?Object(m.jsx)(Fe,{}):Object(m.jsx)(ye.a,{to:"/"})}),Object(m.jsx)(ye.b,{path:"*",element:Object(m.jsx)(E,{})})]})})]}),Object(m.jsx)(ve,{})]})};c.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(y,{children:Object(m.jsx)(De,{})})}))},95:function(e,t,n){e.exports={container:"MyProfile_container__-WYGw",title:"MyProfile_title__268tm",tabContainer:"MyProfile_tabContainer__1CT4W",tabButton:"MyProfile_tabButton__6lNxG",postContainer:"MyProfile_postContainer__1Exfp"}}},[[900,1,2]]]);
//# sourceMappingURL=main.e8003cb9.chunk.js.map